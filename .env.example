# =======================
# MIRROR OF TRUTH - Environment Variables Template
# =======================
# Copy this file to .env.local for development: cp .env.example .env.local
# Never commit .env.local to git (it's in .gitignore)

# =======================
# SUPABASE (Required)
# =======================
# For local development, run: supabase start
# Then copy the values from the output

# Local: http://localhost:54321
# Production: Your Supabase project URL
SUPABASE_URL=http://localhost:54321

# Get this from: supabase status (API URL + anon key)
SUPABASE_ANON_KEY=your-supabase-anon-key-here

# Get this from: supabase status (service_role key)
# IMPORTANT: Keep this secret! Never expose in frontend code
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here

# =======================
# AUTHENTICATION (Required)
# =======================
# Generate a strong random string for JWT signing
# Example: openssl rand -base64 32
JWT_SECRET=your-very-long-random-jwt-secret-minimum-32-characters

# =======================
# AI - ANTHROPIC CLAUDE (Required)
# =======================
# Get your API key from: https://console.anthropic.com
# Required for generating reflections and evolution reports
ANTHROPIC_API_KEY=sk-ant-api03-your-anthropic-key-here

# =======================
# EMAIL - GMAIL (Required for production)
# =======================
# Your Gmail address
GMAIL_USER=your-email@gmail.com

# Gmail App Password (NOT your regular password)
# Setup: Google Account → Security → 2-Step Verification → App passwords
# Generate a 16-character app password
GMAIL_APP_PASSWORD=your-16-char-app-password

# =======================
# REDIS - UPSTASH (Required for receipts)
# =======================
# For local testing, you can use a local Redis or Upstash free tier
# Sign up at: https://upstash.com

UPSTASH_REDIS_REST_URL=https://your-redis-url.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-redis-token-here

# =======================
# PAYMENTS - STRIPE (Required for subscriptions)
# =======================
# Get test keys from: https://dashboard.stripe.com/test/apikeys
# For production, use live keys

# Test mode keys start with: sk_test_ and pk_test_
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key

# Stripe webhook secret (for handling payment events)
# Get this from: Stripe Dashboard → Developers → Webhooks
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret

# =======================
# BUSINESS INFORMATION (Required for receipts)
# =======================
BUSINESS_NUMBER=your-business-number
BUSINESS_NAME=Your Business Name
BIT_PHONE=+1234567890

# =======================
# APPLICATION SETTINGS
# =======================
NODE_ENV=development
PORT=3000

# Your domain (for production)
DOMAIN=http://localhost:3000

# =======================
# SECURITY (Optional)
# =======================
# Admin key for manual operations
ADMIN_KEY=generate-a-random-admin-key-here

# API rate limiting (requests per minute)
RATE_LIMIT=60

# =======================
# ANALYTICS (Optional)
# =======================
# Google Analytics ID
GA_ID=G-XXXXXXXXXX

# PostHog API key for product analytics
POSTHOG_KEY=phc_xxxxxxxxxx

# =======================
# FEATURE FLAGS (Optional)
# =======================
ENABLE_COST_TRACKING=true
ENABLE_DETAILED_LOGGING=true
ENABLE_EMAIL_NOTIFICATIONS=true

# =======================
# SETUP INSTRUCTIONS
# =======================
#
# 1. LOCAL DEVELOPMENT SETUP
#    - Install Supabase CLI: npm install -g supabase
#    - Initialize: supabase init
#    - Start local instance: supabase start
#    - Copy .env.example to .env.local
#    - Fill in the Supabase keys from: supabase status
#    - Generate JWT_SECRET: openssl rand -base64 32
#    - Add your Anthropic API key
#
# 2. GMAIL SETUP (for email features)
#    - Enable 2-factor authentication on Gmail
#    - Generate app password: Google Account → Security → App passwords
#    - Use the 16-character password (not your regular Gmail password)
#
# 3. ANTHROPIC SETUP
#    - Sign up at: https://console.anthropic.com
#    - Add billing information
#    - Create API key
#    - Start with Claude Sonnet 4
#
# 4. STRIPE SETUP (for subscriptions)
#    - Sign up at: https://stripe.com
#    - Get test API keys from dashboard
#    - Set up webhook endpoint for payment events
#
# 5. REDIS SETUP (for receipts/sessions)
#    - Sign up at: https://upstash.com (free tier available)
#    - Create Redis database
#    - Copy REST URL and token
#
# 6. VERCEL DEPLOYMENT (production)
#    - Push code to GitHub
#    - Import project in Vercel
#    - Add all environment variables in Vercel dashboard
#    - Deploy!

# =======================
# TESTING
# =======================
# For testing with real APIs, create .env.test
# Use test API keys and a separate test database
